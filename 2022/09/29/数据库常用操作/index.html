

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon.png">
  <link rel="icon" href="/img/icon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Deng ErPu">
  <meta name="keywords" content="">
  
    <meta name="description" content="数据库常用操作库相关创建数据库 1create database 数据库名称;  删除数据库 1drop database 数据库名称;  创建一个使用 utf8 字符集的名为test的 数据库 1create database test character set utf8  创建一个使用 utf8 字符集，并带校对规则的 test_db 数据库 1create database test_db">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库常用操作">
<meta property="og:url" content="http://example.com/2022/09/29/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/index.html">
<meta property="og:site_name" content="会写Bug的小邓程序员">
<meta property="og:description" content="数据库常用操作库相关创建数据库 1create database 数据库名称;  删除数据库 1drop database 数据库名称;  创建一个使用 utf8 字符集的名为test的 数据库 1create database test character set utf8  创建一个使用 utf8 字符集，并带校对规则的 test_db 数据库 1create database test_db">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/article/mysql.png">
<meta property="article:published_time" content="2022-09-29T05:00:00.000Z">
<meta property="article:modified_time" content="2022-09-29T05:00:20.180Z">
<meta property="article:author" content="Deng ErPu">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="数据库常用操作">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/img/article/mysql.png">
  
  
  
  <title>数据库常用操作 - 会写Bug的小邓程序员</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/mac.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>爱写Bug的小邓程序员</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/bg.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="数据库常用操作"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-09-29 13:00" pubdate>
          2022年9月29日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          13k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          112 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">数据库常用操作</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="数据库常用操作"><a href="#数据库常用操作" class="headerlink" title="数据库常用操作"></a>数据库常用操作</h1><h2 id="库相关"><a href="#库相关" class="headerlink" title="库相关"></a>库相关</h2><p>创建数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database 数据库名称;<br></code></pre></td></tr></table></figure>

<p>删除数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> database 数据库名称;<br></code></pre></td></tr></table></figure>

<p>创建一个使用 utf8 字符集的名为test的 数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database test <span class="hljs-type">character</span> <span class="hljs-keyword">set</span> utf8<br></code></pre></td></tr></table></figure>

<p>创建一个使用 utf8 字符集，并带校对规则的 test_db 数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database test_db <span class="hljs-type">character</span> <span class="hljs-keyword">set</span> utf8 <span class="hljs-keyword">collate</span> utf8_bin<br></code></pre></td></tr></table></figure>

<blockquote>
<p>校对规则 utf8_bin 区分大小 默认 utf8_general_ci 不区分大小写</p>
</blockquote>
<p>查看当前数据库服务器中的所有数据库 </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> databases;<br></code></pre></td></tr></table></figure>

<p>查看前面创建的test 数据库的定义信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> database `test`;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>在创建数据库,表的时候，为了规避关键字，可以使用反引号解决</p>
</blockquote>
<h2 id="备份与恢复"><a href="#备份与恢复" class="headerlink" title="备份与恢复"></a>备份与恢复</h2><h3 id="备份恢复数据库"><a href="#备份恢复数据库" class="headerlink" title="备份恢复数据库"></a>备份恢复数据库</h3><p>备份, 要在 <code>Dos</code> 下执行 mysqldump 指令其实在 mysql 安装目录bin </p>
<p>语法：(-p后面不带密码，回车之后要输入密码)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mysqldump -u 用户名 -p -B 数据库1 数据库2 数据库n &gt; 文件名.sql<br></code></pre></td></tr></table></figure>

<p>例如：（数据库空格之后，再加数据库可以同时备份多个数据库）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysqldump -u root -proot -B <span class="hljs-built_in">test</span> &gt; d://1.sql<br></code></pre></td></tr></table></figure>

<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220912220150715.png" srcset="/img/loading.gif" lazyload alt="image-20220912220150715"></p>
<p>恢复数据库(注意：进入 Mysql 命令行再执行)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> source d:<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-number">1.</span><span class="hljs-keyword">sql</span><br></code></pre></td></tr></table></figure>

<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220912220438275.png" srcset="/img/loading.gif" lazyload alt="image-20220912220438275"></p>
<p>第二个恢复方法， 直接将 1.sql 的内容放到查询编辑器中，执行</p>
<h3 id="备份恢复数据库的表"><a href="#备份恢复数据库的表" class="headerlink" title="备份恢复数据库的表"></a>备份恢复数据库的表</h3><p>备份表：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mysqldump -u 用户名 -p密码 数据库 表1 表2 表n &gt; d:\\文件名.sql<br></code></pre></td></tr></table></figure>

<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220912220940978.png" srcset="/img/loading.gif" lazyload alt="image-20220912220940978"></p>
<p>恢复表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sehell">mysql&gt; source d://1.sql<br></code></pre></td></tr></table></figure>

<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220912221152215.png" srcset="/img/loading.gif" lazyload alt="image-20220912221152215"></p>
<h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220912221359249.png" srcset="/img/loading.gif" lazyload alt="image-20220912221359249"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> `<span class="hljs-keyword">user</span>`(<br>	id <span class="hljs-type">int</span>,<br>    `name` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>),<br>    `password` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>),<br>    `birthday` <span class="hljs-type">date</span><br>)<span class="hljs-type">character</span> <span class="hljs-keyword">set</span> utf8 <span class="hljs-keyword">collate</span> utf8_bin engine innodb;<br></code></pre></td></tr></table></figure>

<p>t3的时间会自动更新</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">mysql&gt; create table birthday (<br>    -&gt; t1 date,<br>    -&gt; t2 datetime,<br>    -&gt; t3 timestamp not null default current_timestamp on update current_timestamp<br>    -&gt; );<br>    <br>    insert into birthday (t1,t2) values(&#x27;2022-09-27&#x27;,&#x27;2022-09-27 14:39:20&#x27;);<br></code></pre></td></tr></table></figure>

<h2 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927150714911.png" srcset="/img/loading.gif" lazyload alt="image-20220927150714911"></p>
<h3 id="添加一个name字段"><a href="#添加一个name字段" class="headerlink" title="添加一个name字段"></a>添加一个name字段</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter table 表名 add (字段名 字段类型,字段名 字段类型);<br>alter table birthday add name varchar(5) not null;<br></code></pre></td></tr></table></figure>

<h3 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">desc 表名;<br></code></pre></td></tr></table></figure>

<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927185816132.png" srcset="/img/loading.gif" lazyload alt="image-20220927185816132"></p>
<h3 id="修改表字段"><a href="#修改表字段" class="headerlink" title="修改表字段"></a>修改表字段</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter table birthday modify name varchar(10) not null;<br></code></pre></td></tr></table></figure>

<h3 id="删除某列"><a href="#删除某列" class="headerlink" title="删除某列"></a>删除某列</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter table 表名 drop 字段名;<br>alter table birthday drop t4;<br></code></pre></td></tr></table></figure>

<h3 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">rename table 旧表名 to 新表名;<br>rename table birthday to bir;<br></code></pre></td></tr></table></figure>

<h3 id="修改表的字符集"><a href="#修改表的字符集" class="headerlink" title="修改表的字符集"></a>修改表的字符集</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter table 表名 character set 字符集编码;<br>alter table bir character set utf8;<br></code></pre></td></tr></table></figure>

<h3 id="修改列名"><a href="#修改列名" class="headerlink" title="修改列名"></a>修改列名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">alter table 表名 change 旧字段名 新字段名 类型;<br>alter table bir change name username varchar(5);<br></code></pre></td></tr></table></figure>

<h2 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">drop table 表名;<br></code></pre></td></tr></table></figure>

<h2 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927195136453.png" srcset="/img/loading.gif" lazyload alt="image-20220927195136453"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">insert into bir (t1,t2,username) values(&#x27;2022-09-27&#x27;,&#x27;2022-09-27 19:43:10&#x27;,&#x27;张三&#x27;);<br></code></pre></td></tr></table></figure>

<p>字符和日期型数据应包含在单引号中</p>
<p>列可以插入空值[前提是该字段允许为空]</p>
<p>insert into tab_name (列名..) values (),(),() 形式添加多条记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO `goods` (id, goods_name, price) VALUES(50, &#x27;三星手机&#x27;, 2300),(60, &#x27;海尔手机&#x27;, 1800);<br></code></pre></td></tr></table></figure>

<p>如果是给表中的所有字段添加数据，可以不写前面的字段名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO `goods` VALUES(70, &#x27;IBM 手机&#x27;, 5000);<br></code></pre></td></tr></table></figure>

<h2 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927195347552.png" srcset="/img/loading.gif" lazyload alt="image-20220927195347552"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927195643491.png" srcset="/img/loading.gif" lazyload alt="image-20220927195643491"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">update 表名 set 字段名1 = 新值，字段名2 = 新值 ... where <br>update bir set t1 = &#x27;2000-12-12&#x27;, t2 = &#x27;2000-12-12 12:12:12&#x27; where username = &#x27;张三&#x27;;<br></code></pre></td></tr></table></figure>

<h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927200013609.png" srcset="/img/loading.gif" lazyload alt="image-20220927200013609"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">delete from bir where username = &#x27;张三&#x27;;<br></code></pre></td></tr></table></figure>

<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927200334178.png" srcset="/img/loading.gif" lazyload alt="image-20220927200334178"></p>
<h2 id="查询语句"><a href="#查询语句" class="headerlink" title="查询语句"></a>查询语句</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927200401394.png" srcset="/img/loading.gif" lazyload alt="image-20220927200401394"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927200441233.png" srcset="/img/loading.gif" lazyload alt="image-20220927200441233"></p>
<p>查询 * 表示所有字段 FROM 从哪个表 </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br>	<span class="hljs-keyword">from</span> t1<br>	<span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;tom&#x27;</span><br></code></pre></td></tr></table></figure>

<p>要查询的记录，每个字段都相同，才会去重</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DISTINCT `name`, english FROM student;<br></code></pre></td></tr></table></figure>

<h3 id="在-select-语句中可使用-as-语句"><a href="#在-select-语句中可使用-as-语句" class="headerlink" title="在 select 语句中可使用 as 语句"></a>在 select 语句中可使用 as 语句</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927200616494.png" srcset="/img/loading.gif" lazyload alt="image-20220927200616494"></p>
<h3 id="where-子句中经常使用的运算符"><a href="#where-子句中经常使用的运算符" class="headerlink" title="where 子句中经常使用的运算符"></a>where 子句中经常使用的运算符</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927200728716.png" srcset="/img/loading.gif" lazyload alt="image-20220927200728716"></p>
<p>查询英语分数在 80－90 之间的同学</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM student WHERE english &gt;= 80 AND english &lt;= 90;<br>SELECT * FROM student WHERE english BETWEEN 80 AND 90; -- between .. and .. 是 闭区间<br></code></pre></td></tr></table></figure>

<p>查询数学分数为 89,90,91 的同学。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM student WHERE math = 89 OR math = 90 OR math = 91; <br>SELECT * FROM student WHERE math IN (89, 90, 91);<br></code></pre></td></tr></table></figure>

<h3 id="使用-order-by-子句排序查询结果"><a href="#使用-order-by-子句排序查询结果" class="headerlink" title="使用 order by 子句排序查询结果"></a>使用 order by 子句排序查询结果</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927212621546.png" srcset="/img/loading.gif" lazyload alt="image-20220927212621546"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927212640719.png" srcset="/img/loading.gif" lazyload alt="image-20220927212640719"></p>
<h3 id="合计-x2F-统计函数"><a href="#合计-x2F-统计函数" class="headerlink" title="合计&#x2F;统计函数"></a>合计&#x2F;统计函数</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927213103371.png" srcset="/img/loading.gif" lazyload alt="image-20220927213103371"></p>
<p>count(*) 和 count(列) 的区别 </p>
<p>解释 :count(*) 返回满足条件的记录的行数 </p>
<p>count(列): 统计满足条件的某列有多少个，但是会排除 为 null 的情况</p>
<p>统计一个班级语文成绩平均分 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT SUM(chinese)/ COUNT(*) FROM student;<br></code></pre></td></tr></table></figure>

<p>求一个班级数学平均分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT AVG(math) FROM student;<br></code></pre></td></tr></table></figure>

<p>求班级最高分和最低分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT MAX(math + english + chinese), MIN(math + english + chinese) FROM student;<br></code></pre></td></tr></table></figure>

<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927213704900.png" srcset="/img/loading.gif" lazyload alt="image-20220927213704900"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927213734534.png" srcset="/img/loading.gif" lazyload alt="image-20220927213734534"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927213759169.png" srcset="/img/loading.gif" lazyload alt="image-20220927213759169"></p>
<h3 id="使用-group-by-子句对列进行分组"><a href="#使用-group-by-子句对列进行分组" class="headerlink" title="使用 group by 子句对列进行分组"></a>使用 group by 子句对列进行分组</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927213844362.png" srcset="/img/loading.gif" lazyload alt="image-20220927213844362"></p>
<h3 id="使用-having-子句对分组后的结果进行过滤"><a href="#使用-having-子句对分组后的结果进行过滤" class="headerlink" title="使用 having 子句对分组后的结果进行过滤"></a>使用 having 子句对分组后的结果进行过滤</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927214547521.png" srcset="/img/loading.gif" lazyload alt="image-20220927214547521"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927214628469.png" srcset="/img/loading.gif" lazyload alt="image-20220927214628469"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT AVG(sal), deptno FROM emp GROUP BY deptno HAVING AVG(sal) &lt; 2000;<br></code></pre></td></tr></table></figure>

<h2 id="字符串相关函数"><a href="#字符串相关函数" class="headerlink" title="字符串相关函数"></a>字符串相关函数</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927220611938.png" srcset="/img/loading.gif" lazyload alt="image-20220927220611938"></p>
<h3 id="CHARSET-str-返回字串字符集"><a href="#CHARSET-str-返回字串字符集" class="headerlink" title="CHARSET(str) 返回字串字符集"></a>CHARSET(str) 返回字串字符集</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT CHARSET(ename) FROM emp;<br></code></pre></td></tr></table></figure>

<h3 id="CONCAT-string2-…-连接字串-将多个列拼接成一列"><a href="#CONCAT-string2-…-连接字串-将多个列拼接成一列" class="headerlink" title="CONCAT (string2 [,… ]) 连接字串, 将多个列拼接成一列"></a>CONCAT (string2 [,… ]) 连接字串, 将多个列拼接成一列</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT CONCAT(ename, &#x27; 工作是 &#x27;, job) FROM emp;<br></code></pre></td></tr></table></figure>

<h3 id="INSTR-string-substring-返回-substring-在-string-中出现的位置-没有返回-0"><a href="#INSTR-string-substring-返回-substring-在-string-中出现的位置-没有返回-0" class="headerlink" title="INSTR (string ,substring )返回 substring 在 string 中出现的位置,没有返回 0"></a>INSTR (string ,substring )返回 substring 在 string 中出现的位置,没有返回 0</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT INSTR(&#x27;hanshunping&#x27;, &#x27;ping&#x27;) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="UCASE-string2-转换成大写"><a href="#UCASE-string2-转换成大写" class="headerlink" title="UCASE (string2 ) 转换成大写"></a>UCASE (string2 ) 转换成大写</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT UCASE(ename) FROM emp;<br></code></pre></td></tr></table></figure>

<h3 id="LCASE-string2-转换成小写"><a href="#LCASE-string2-转换成小写" class="headerlink" title="LCASE (string2 ) 转换成小写"></a>LCASE (string2 ) 转换成小写</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT LCASE(ename) FROM emp;<br></code></pre></td></tr></table></figure>

<h3 id="LEFT-string2-length-从-string2-中的左边起取-length-个字符"><a href="#LEFT-string2-length-从-string2-中的左边起取-length-个字符" class="headerlink" title="LEFT (string2 ,length )从 string2 中的左边起取 length 个字符"></a>LEFT (string2 ,length )从 string2 中的左边起取 length 个字符</h3><h3 id="RIGHT-string2-length-从-string2-中的右边起取-length-个字符"><a href="#RIGHT-string2-length-从-string2-中的右边起取-length-个字符" class="headerlink" title="RIGHT (string2 ,length ) 从 string2 中的右边起取 length 个字符"></a>RIGHT (string2 ,length ) 从 string2 中的右边起取 length 个字符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT LEFT(ename, 2) FROM emp;<br></code></pre></td></tr></table></figure>

<h3 id="LENGTH-string-string-长度"><a href="#LENGTH-string-string-长度" class="headerlink" title="LENGTH (string )string 长度"></a>LENGTH (string )string 长度</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT LENGTH(ename) FROM emp;<br></code></pre></td></tr></table></figure>

<h3 id="REPLACE-str-search-str-replace-str"><a href="#REPLACE-str-search-str-replace-str" class="headerlink" title="REPLACE (str ,search_str ,replace_str )"></a>REPLACE (str ,search_str ,replace_str )</h3><p>– 在 str 中用 replace_str 替换 search_str </p>
<p>– 如果是 manager 就替换成 经理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT ename, REPLACE(job,&#x27;MANAGER&#x27;, &#x27;经理&#x27;) FROM emp;<br></code></pre></td></tr></table></figure>

<h3 id="STRCMP-string1-string2"><a href="#STRCMP-string1-string2" class="headerlink" title="STRCMP (string1 ,string2 )"></a>STRCMP (string1 ,string2 )</h3><p>逐字符比较两字串大小 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT STRCMP(&#x27;hsp&#x27;, &#x27;hsp&#x27;) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="SUBSTRING-str-position-length"><a href="#SUBSTRING-str-position-length" class="headerlink" title="SUBSTRING (str , position [,length ])"></a>SUBSTRING (str , position [,length ])</h3><p>– 从 str 的 position 开始【从 1 开始计算】,取 length 个字符 </p>
<p>– 从 ename 列的第一个位置开始取出 2 个字符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT SUBSTRING(ename, 1, 2) FROM emp;<br></code></pre></td></tr></table></figure>

<h3 id="LTRIM-string2-RTRIM-string2-TRIM-string"><a href="#LTRIM-string2-RTRIM-string2-TRIM-string" class="headerlink" title="LTRIM (string2 ) RTRIM (string2 ) TRIM(string)"></a>LTRIM (string2 ) RTRIM (string2 ) TRIM(string)</h3><p>去除前端空格或后端空格</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT LTRIM(&#x27; 你好啊&#x27;) FROM DUAL; <br>SELECT RTRIM(&#x27;你好啊 &#x27;) FROM DUAL; <br>SELECT TRIM(&#x27; 你好啊 &#x27;) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h2 id="数学相关函数"><a href="#数学相关函数" class="headerlink" title="数学相关函数"></a>数学相关函数</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928103329128.png" srcset="/img/loading.gif" lazyload alt="image-20220928103329128"></p>
<h3 id="ABS-num"><a href="#ABS-num" class="headerlink" title="ABS(num)"></a>ABS(num)</h3><p>绝对值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT ABS(-10) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="BIN-decimal-number-十进制转二进制"><a href="#BIN-decimal-number-十进制转二进制" class="headerlink" title="BIN (decimal_number )十进制转二进制"></a>BIN (decimal_number )十进制转二进制</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT BIN(10) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="CEILING-number2-向上取整"><a href="#CEILING-number2-向上取整" class="headerlink" title="CEILING (number2 ) 向上取整"></a>CEILING (number2 ) 向上取整</h3><p>得到比 num2 大的最小整数 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT CEILING(-1.1) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="CONV-number2-from-base-to-base"><a href="#CONV-number2-from-base-to-base" class="headerlink" title="CONV(number2,from_base,to_base)"></a>CONV(number2,from_base,to_base)</h3><p>进制转换</p>
<p>下面的含义是 8 是十进制的 8, 转成 2 进制输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT CONV(8, 10, 2) FROM DUAL;<br></code></pre></td></tr></table></figure>

<p>下面的含义是 8 是 16 进制的 8, 转成 2 进制输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT CONV(8, 16, 10) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="FLOOR-number2"><a href="#FLOOR-number2" class="headerlink" title="FLOOR (number2 )"></a>FLOOR (number2 )</h3><p>向下取整,得到比 num2 小的最大整数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT FLOOR(-1.1) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="FORMAT-number-decimal-places"><a href="#FORMAT-number-decimal-places" class="headerlink" title="FORMAT (number,decimal_places )"></a>FORMAT (number,decimal_places )</h3><p>保留小数位数(四舍五入)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT FORMAT(78.125458,2) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="HEX-DecimalNumber"><a href="#HEX-DecimalNumber" class="headerlink" title="HEX (DecimalNumber )"></a>HEX (DecimalNumber )</h3><h3 id="LEAST-number-number2"><a href="#LEAST-number-number2" class="headerlink" title="LEAST (number , number2 [,..])"></a>LEAST (number , number2 [,..])</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT LEAST(0,1, -10, 4) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="MOD-numerator-denominator"><a href="#MOD-numerator-denominator" class="headerlink" title="MOD (numerator ,denominator )"></a>MOD (numerator ,denominator )</h3><p>求余</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT MOD(10, 3) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="RAND-seed"><a href="#RAND-seed" class="headerlink" title="RAND([seed])"></a>RAND([seed])</h3><p>RAND([seed]) 返回随机数 其范围为 0 ≤ v ≤ 1.0</p>
<p>– 1. 如果使用 rand() 每次返回不同的随机数 ，在 0 ≤ v ≤ 1.0 </p>
<p>– 2. 如果使用 rand(seed) 返回随机数, 范围 0 ≤ v ≤ 1.0, 如果 seed 不变， </p>
<p>-- 该随机数也不变了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT RAND() FROM DUAL;<br></code></pre></td></tr></table></figure>

<h2 id="时间日期相关函数"><a href="#时间日期相关函数" class="headerlink" title="时间日期相关函数"></a>时间日期相关函数</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928110627070.png" srcset="/img/loading.gif" lazyload alt="image-20220928110627070"></p>
<h3 id="CURRENT-DATE"><a href="#CURRENT-DATE" class="headerlink" title="CURRENT_DATE ( )"></a>CURRENT_DATE ( )</h3><p>当前日期</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT CURRENT_DATE() FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="CURRENT-TIME"><a href="#CURRENT-TIME" class="headerlink" title="CURRENT_TIME ( )"></a>CURRENT_TIME ( )</h3><p>当前时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT CURRENT_TIME() FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="CURRENT-TIMESTAMP"><a href="#CURRENT-TIMESTAMP" class="headerlink" title="CURRENT_TIMESTAMP ( )"></a>CURRENT_TIMESTAMP ( )</h3><p>当前时间戳</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT CURRENT_TIMESTAMP() FROM DUAL;<br></code></pre></td></tr></table></figure>

<p>– 显示所有新闻信息，发布日期只显示 日期，不用显示时间. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT id, content, DATE(send_time) FROM mes; <br></code></pre></td></tr></table></figure>

<p>– 请查询在 10 分钟内发布的新闻, 思路一定要梳理一下. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * <br>FROM mes <br>WHERE DATE_ADD(send_time, INTERVAL 10 MINUTE) &gt;= NOW() <br>SELECT * <br>FROM mes <br>WHERE send_time &gt;= DATE_SUB(NOW(), INTERVAL 10 MINUTE)<br></code></pre></td></tr></table></figure>

<p>– 请在 mysql 的 sql 语句中求出 2011-11-11 和 1990-1-1 相差多少天 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DATEDIFF(&#x27;2011-11-11&#x27;, &#x27;1990-01-01&#x27;) FROM DUAL; <br></code></pre></td></tr></table></figure>

<p>– 请用 mysql 的 sql 语句求出你活了多少天? [练习] 1986-11-11 出生 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DATEDIFF(NOW(), &#x27;1986-11-11&#x27;) FROM DUAL; <br></code></pre></td></tr></table></figure>

<p>– 如果你能活 80 岁，求出你还能活多少天.[练习] 1986-11-11 出生 </p>
<p>– 先求出活 80 岁 时, 是什么日期 X </p>
<p>– 然后在使用 datediff(x, now()); 1986-11-11-&gt;datetime </p>
<p>– INTERVAL 80 YEAR ： YEAR 可以是 年月日，时分秒 </p>
<p>– ‘1986-11-11’ 可以 date,datetime timestamp </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DATEDIFF(DATE_ADD(&#x27;1986-11-11&#x27;, INTERVAL 80 YEAR), NOW()) FROM DUAL; <br>SELECT TIMEDIFF(&#x27;10:11:11&#x27;, &#x27;06:10:10&#x27;) FROM DUAL; <br></code></pre></td></tr></table></figure>

<p>– YEAR|Month|DAY| DATE (datetime ) </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT YEAR(NOW()) FROM DUAL; <br>SELECT MONTH(NOW()) FROM DUAL; <br>SELECT DAY(NOW()) FROM DUAL; <br>SELECT MONTH(&#x27;2013-11-10&#x27;) FROM DUAL; <br></code></pre></td></tr></table></figure>

<p>– unix_timestamp() : 返回的是 1970-1-1 到现在的秒数 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT UNIX_TIMESTAMP() FROM DUAL; <br></code></pre></td></tr></table></figure>

<p>– FROM_UNIXTIME() : 可以把一个 unix_timestamp 秒数[时间戳]，转成指定格式的日期 </p>
<p>– %Y-%m-%d 格式是规定好的，表示年月日 </p>
<p>– 意义：在开发中，可以存放一个整数，然后表示时间，通过 FROM_UNIXTIME 转换 </p>
<p>--</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT FROM_UNIXTIME(1618483484, &#x27;%Y-%m-%d&#x27;) FROM DUAL;<br>SELECT FROM_UNIXTIME(1618483100, &#x27;%Y-%m-%d %H:%i:%s&#x27;) FROM DUAL; <br>SELECT * FROM mysql.user \G<br></code></pre></td></tr></table></figure>

<h2 id="加密和系统函数"><a href="#加密和系统函数" class="headerlink" title="加密和系统函数"></a>加密和系统函数</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928135657933.png" srcset="/img/loading.gif" lazyload alt="image-20220928135657933"></p>
<h3 id="user"><a href="#user" class="headerlink" title="user()"></a>user()</h3><p>可以查看登录到 mysql 的有哪些用户，以及登录的 IP</p>
<p>用户@IP 地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT USER() FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="DATABASE"><a href="#DATABASE" class="headerlink" title="DATABASE()"></a>DATABASE()</h3><p>查询当前使用数据库名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select database();<br></code></pre></td></tr></table></figure>

<h3 id="MD5-str"><a href="#MD5-str" class="headerlink" title="MD5(str)"></a>MD5(str)</h3><p>为字符串算出一个 MD5 32 的字符串，常用(用户密码)加密 </p>
<p>root 密码是 abc -&gt; 加密 abc -&gt; 在数据库中存放的是加密后的密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select md5(&#x27;abc&#x27;) from dual;<br></code></pre></td></tr></table></figure>

<h3 id="PASSWORD-str"><a href="#PASSWORD-str" class="headerlink" title="PASSWORD(str)"></a>PASSWORD(str)</h3><p>加密函数</p>
<p>MySQL 数据库的用户密码就是 PASSWORD 函数加密 (测试未使用成功)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT PASSWORD(&#x27;abc&#x27;) FROM DUAL;<br></code></pre></td></tr></table></figure>

<p>从原文密码 str 计算并返回密码字符串</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select * from mysql.user \G<br></code></pre></td></tr></table></figure>

<p>通常用于对 mysql 数据库的用户密码加密 </p>
<p>mysql.user 表示 数据库.表 </p>
<h2 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928141740748.png" srcset="/img/loading.gif" lazyload alt="image-20220928141740748"></p>
<h3 id="IF-expr1-expr2-expr3"><a href="#IF-expr1-expr2-expr3" class="headerlink" title="IF(expr1,expr2,expr3)"></a>IF(expr1,expr2,expr3)</h3><p>如果 expr1 为 True ,则返回 expr2 否则返回 expr3</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT IF(TRUE, &#x27;北京&#x27;, &#x27;上海&#x27;) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="IFNULL-expr1-expr2"><a href="#IFNULL-expr1-expr2" class="headerlink" title="IFNULL(expr1,expr2)"></a>IFNULL(expr1,expr2)</h3><p>如果 expr1 不为空 NULL,则返回 expr1,否则返回 expr2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT IFNULL( NULL, &#x27;哈哈哈哈&#x27;) FROM DUAL;<br></code></pre></td></tr></table></figure>

<h3 id="SELECT-CASE-WHEN-expr1-THEN-expr2-WHEN-expr3-THEN-expr4-ELSE-expr5-END"><a href="#SELECT-CASE-WHEN-expr1-THEN-expr2-WHEN-expr3-THEN-expr4-ELSE-expr5-END" class="headerlink" title="SELECT CASE WHEN expr1 THEN expr2 WHEN expr3 THEN expr4 ELSE expr5 END;"></a>SELECT CASE WHEN expr1 THEN expr2 WHEN expr3 THEN expr4 ELSE expr5 END;</h3><p>如果 expr1 为 TRUE,则返回 expr2,如果 expr2 为 t, 返回 expr4, 否则返回 expr5</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT CASE <br>	WHEN TRUE THEN &#x27;jack&#x27;<br>	WHEN FALSE THEN &#x27;tom&#x27; <br>	ELSE &#x27;mary&#x27; END;<br></code></pre></td></tr></table></figure>

<h2 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928143329891.png" srcset="/img/loading.gif" lazyload alt="image-20220928143329891"></p>
<p>按雇员的 id 号升序取出， 每页显示 3 条记录，请分别显示 第 1 页，第 2 页，第 3 页</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 第 1 页 <br>SELECT * FROM emp ORDER BY empno LIMIT 0, 3; <br>-- 第 2 页 <br>SELECT * FROM emp ORDER BY empno LIMIT 3, 3; <br>-- 第 3 页 <br>SELECT * FROM emp ORDER BY empno LIMIT 6, 3;<br><br>-- 推导一个公式 <br>SELECT * FROM emp ORDER BY empno LIMIT 每页显示记录数 * (第几页-1) , 每页显示记录数<br></code></pre></td></tr></table></figure>

<h2 id="数据分组"><a href="#数据分组" class="headerlink" title="数据分组"></a>数据分组</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928143641174.png" srcset="/img/loading.gif" lazyload alt="image-20220928143641174"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928143657180.png" srcset="/img/loading.gif" lazyload alt="image-20220928143657180"></p>
<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><p>多表查询的条件不能少于 表的个数-1, 否则会出现笛卡尔集</p>
<h3 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h3><p>自连接是指在同一张表的连接查询</p>
<p>自连接的特点 </p>
<p>​	1.	把同一张表当做两张表使用 </p>
<ol start="2">
<li><p>需要给表取别名 表名 表别名 </p>
</li>
<li><p>列名不明确，可以指定列的别名 列名 as 列的别名</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT worker.ename AS &#x27;职员名&#x27; , boss.ename AS &#x27;上级名&#x27; <br>	FROM emp worker, emp boss <br>	WHERE worker.mgr = boss.empno;<br></code></pre></td></tr></table></figure>

<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>子查询是指嵌入在其它 sql 语句中的 select 语句,也叫嵌套查询</p>
<p>单行子查询是指只返回一行数据的子查询语句</p>
<p>多行子查询指返回多行数据的子查询  使用关键字 in </p>
<p>在多行子查询中使用 all 操作符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT ename, sal, deptno FROM emp <br>WHERE sal &gt; ALL( SELECT sal FROM emp WHERE deptno = 30 )<br>-- 可以这样写<br>SELECT ename, sal, deptno FROM emp <br>WHERE sal &gt; ( SELECT MAX(sal) FROM emp WHERE deptno = 30 )<br><br>SELECT ename, sal, deptno FROM emp <br>WHERE sal &gt; any( SELECT sal FROM emp WHERE deptno = 30 )<br></code></pre></td></tr></table></figure>

<h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928155053235.png" srcset="/img/loading.gif" lazyload alt="image-20220928155053235"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928155129568.png" srcset="/img/loading.gif" lazyload alt="image-20220928155129568"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928155140524.png" srcset="/img/loading.gif" lazyload alt="image-20220928155140524"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 改成左外连接 <br>SELECT `name`, stu.id, grade FROM stu LEFT JOIN exam ON stu.id = exam.id;<br>-- 使用右外连接（显示所有成绩，如果没有名字匹配，显示空) <br>-- 即：右边的表(exam) 和左表没有匹配的记录，也会把右表的记录显示出来 <br>SELECT `name`, stu.id, grade FROM stu RIGHT JOIN exam ON stu.id = exam.id;<br></code></pre></td></tr></table></figure>

<h2 id="表复制"><a href="#表复制" class="headerlink" title="表复制"></a>表复制</h2><h3 id="自我复制数据"><a href="#自我复制数据" class="headerlink" title="自我复制数据"></a>自我复制数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">INSERT INTO my_tab01 (id, `name`, sal, job,deptno) <br>SELECT empno, ename, sal, job, deptno FROM emp; <br>-- 2. 自我复制 <br>INSERT INTO my_tab01 SELECT * FROM my_tab01;<br></code></pre></td></tr></table></figure>

<h3 id="如何删除掉一张表重复记录"><a href="#如何删除掉一张表重复记录" class="headerlink" title="如何删除掉一张表重复记录"></a>如何删除掉一张表重复记录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs mysql">(1) 先创建一张临时表 my_tmp , 该表的结构和 my_tab02 一样<br>(2) 把 my_tmp 的记录 通过 distinct 关键字 处理后 把记录复制到 my_tmp <br>(3) 清除掉 my_tab02 记录 <br>(4) 把 my_tmp 表的记录复制到 my_tab02 <br>(5) drop 掉 临时表 my_tmp<br>-- (1) 先创建一张临时表 my_tmp , 该表的结构和 my_tab02 一样 <br>create table my_tmp like my_tab02 <br>-- (2) 把 my_tab02 的记录 通过 distinct 关键字 处理后 把记录复制到 my_tmp <br>insert into my_tmp select distinct * from my_tab02;<br>-- (3) 清除掉 my_tab02 记录 <br>delete from my_tab02; <br>-- (4) 把 my_tmp 表的记录复制到 my_tab02 <br>insert into my_tab02 select * from my_tmp; <br>-- (5) drop 掉 临时表 my_tmp <br>drop table my_tmp; <br>select * from my_tab02;<br></code></pre></td></tr></table></figure>

<h2 id="合并查询"><a href="#合并查询" class="headerlink" title="合并查询"></a>合并查询</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928154746274.png" srcset="/img/loading.gif" lazyload alt="image-20220928154746274"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928154802883.png" srcset="/img/loading.gif" lazyload alt="image-20220928154802883"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- union all 就是将两个查询结果合并，不会去重<br>SELECT ename,sal,job FROM emp WHERE sal&gt;2500 <br>UNION ALL SELECT ename,sal,job FROM emp WHERE job=&#x27;MANAGER&#x27; <br>-- union 就是将两个查询结果合并，会去重 <br>SELECT ename,sal,job FROM emp WHERE sal&gt;2500 <br>UNION <br>SELECT ename,sal,job FROM emp WHERE job=&#x27;MANAGER&#x27;<br></code></pre></td></tr></table></figure>

<h2 id="mysql-约束"><a href="#mysql-约束" class="headerlink" title="mysql 约束"></a>mysql 约束</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928155456335.png" srcset="/img/loading.gif" lazyload alt="image-20220928155456335"></p>
<h3 id="primary-key-主键"><a href="#primary-key-主键" class="headerlink" title="primary key(主键)"></a>primary key(主键)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">字段名 字段类型 primary key<br></code></pre></td></tr></table></figure>

<p>用于唯一的标示表行的数据,当定义主键约束后，该列不能重复</p>
<ol>
<li>primary key不能重复而且不能为null。</li>
<li>一张表最多只能有一个主键,但可以是复合主键主键的指定方式有两种</li>
<li>直接在字段名后指定:字段名primakry key在表定义最后写 primary key(列名);</li>
<li>使用desc表名，可以看到primary key的情况.</li>
<li>在实际开发中，每个表往往都会设计一个主键.</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE t18 (id INT PRIMARY KEY) -- 表示 id 列是主键<br>-- 演示复合主键 (id 和 name 做成复合主键)<br>CREATE TABLE t18 (id INT , `name` VARCHAR(32), email VARCHAR(32), PRIMARY KEY (id, `name`) );<br>                  -- 这里就是复合主键 );<br></code></pre></td></tr></table></figure>

<h3 id="not-null-非空"><a href="#not-null-非空" class="headerlink" title="not null(非空)"></a>not null(非空)</h3><p>如果在列上定义了not null,那么当插入数据时，必须为列提供数据。</p>
<h3 id="unique-唯一"><a href="#unique-唯一" class="headerlink" title="unique(唯一)"></a>unique(唯一)</h3><p>当定义了唯一约束后，该列值是不能重复的。</p>
<ol>
<li>如果没有指定not null，则unique字段可以有多个null</li>
<li>一张表可以有多个unique字段</li>
</ol>
<h3 id="foreign-key-外键"><a href="#foreign-key-外键" class="headerlink" title="foreign key(外键)"></a>foreign key(外键)</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928161118937.png" srcset="/img/loading.gif" lazyload alt="image-20220928161118937"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928161146346.png" srcset="/img/loading.gif" lazyload alt="image-20220928161146346"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928161230368.png" srcset="/img/loading.gif" lazyload alt="image-20220928161230368"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 创建 主表 my_class <br>CREATE TABLE my_class ( id INT PRIMARY KEY , -- 班级编号 <br>                       `name` VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;); <br>-- 创建 从表 my_stu <br>CREATE TABLE my_stu ( id INT PRIMARY KEY , -- 学生编号 <br>                     `name` VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;,<br>                     class_id INT , -- 学生所在班级的编号<br>                     -- 下面指定外键关系 <br>                     FOREIGN KEY (class_id) REFERENCES my_class(id)<br>                    )<br></code></pre></td></tr></table></figure>

<h2 id="check"><a href="#check" class="headerlink" title="check"></a>check</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928161718654.png" srcset="/img/loading.gif" lazyload alt="image-20220928161718654"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 测试 <br>CREATE TABLE t23 ( <br>    id INT PRIMARY KEY, <br>    `name` VARCHAR(32) , <br>    sex VARCHAR(6) CHECK (sex IN(&#x27;man&#x27;,&#x27;woman&#x27;)), <br>    sal DOUBLE CHECK ( sal &gt; 1000 AND sal &lt; 2000) <br>);<br></code></pre></td></tr></table></figure>

<h2 id="MySql索引"><a href="#MySql索引" class="headerlink" title="MySql索引"></a>MySql索引</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928165700671.png" srcset="/img/loading.gif" lazyload alt="image-20220928165700671"></p>
<h3 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE INDEX 索引名称 ON 表名 (字段名);<br>CREATE INDEX empno_index ON emp (empno);<br>CREATE INDEX ename_index ON emp (ename) -- 在 ename 上创建索引<br></code></pre></td></tr></table></figure>

<h3 id="索引的类型"><a href="#索引的类型" class="headerlink" title="索引的类型"></a>索引的类型</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928214006829.png" srcset="/img/loading.gif" lazyload alt="image-20220928214006829"></p>
<h3 id="索引使用"><a href="#索引使用" class="headerlink" title="索引使用"></a>索引使用</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928214056599.png" srcset="/img/loading.gif" lazyload alt="image-20220928214056599"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928214113489.png" srcset="/img/loading.gif" lazyload alt="image-20220928214113489"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 查询表是否有索引<br>SHOW INDEXES FROM t25;<br>-- 添加索引 <br>-- 添加唯一索引<br>CREATE UNIQUE INDEX id_index ON t25 (id);<br>-- 添加普通索引方式 1 <br>CREATE INDEX id_index ON t25 (id);<br>-- 如何选择<br>-- 1. 如果某列的值，是不会重复的，则优先考虑使用 unique 索引, 否则使用普通索引 <br>-- 添加普通索引方式 2<br>ALTER TABLE t25 ADD INDEX id_index (id)<br><br>-- 添加主键索引 <br>CREATE TABLE t26 ( id INT , `name` VARCHAR(32)); <br>ALTER TABLE t26 ADD PRIMARY KEY (id) ;<br>SHOW INDEX FROM t25;<br><br>-- 删除索引 <br>DROP INDEX id_index ON t25;<br>-- 删除主键索引 <br>ALTER TABLE t26 DROP PRIMARY KEY;<br><br>-- 修改索引 ， 先删除，在添加新的索引<br><br>-- 查询索引<br>-- 1. 方式 <br>SHOW INDEX FROM t25;<br>-- 2. 方式 <br>SHOW INDEXES FROM t25; <br>-- 3. 方式<br>SHOW KEYS FROM t25; <br>-- 4 方式 <br>DESC t25;<br></code></pre></td></tr></table></figure>

<h2 id="mysql-事务"><a href="#mysql-事务" class="headerlink" title="mysql 事务"></a>mysql 事务</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928214945861.png" srcset="/img/loading.gif" lazyload alt="image-20220928214945861"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928220518441.png" srcset="/img/loading.gif" lazyload alt="image-20220928220518441"></p>
<h3 id="事务和锁"><a href="#事务和锁" class="headerlink" title="事务和锁"></a>事务和锁</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220928220546370.png" srcset="/img/loading.gif" lazyload alt="image-20220928220546370"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 1. 创建一张测试表 <br>CREATE TABLE t27 ( id INT, `name` VARCHAR(32)); <br>-- 2. 开始事务 <br>START TRANSACTION <br>-- 3. 设置保存点 <br>SAVEPOINT a <br><br>-- 执行 dml 操作 <br>INSERT INTO t27 VALUES(100, &#x27;tom&#x27;); <br>SELECT * FROM t27; <br>SAVEPOINT b <br><br>-- 执行 dml 操作 <br>INSERT INTO t27 VALUES(200, &#x27;jack&#x27;);<br>-- 回退到 b <br>ROLLBACK TO b<br>-- 继续回退 a <br>ROLLBACK TO a <br>-- 如果这样, 表示直接回退到事务开始的状态. <br>ROLLBACK <br>COMMIT<br></code></pre></td></tr></table></figure>

<h3 id="回退事务"><a href="#回退事务" class="headerlink" title="回退事务"></a>回退事务</h3><p>在介绍回退事务前，先介绍一下保存点(savepoint)，保存点是事务中的点.用于取消部分事务，当结束事务时(commit)，会自动的删除该事务所定义的所有保存点当执行回退事务时，通过指定保存点可以回退到指定的点,这里我们作图说明</p>
<h3 id="提交事务"><a href="#提交事务" class="headerlink" title="提交事务"></a>提交事务</h3><p>使用commit语句可以提交事务.当执行了commit语句子后,会确认事务的变化、结束事务、删除保存点、释放锁，数据生效。当使用commit语句结束事务子后，其它会话[其他连接]将可以查着到事务变化后的新数据[所有数据就正式生效.]</p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929091657443.png" srcset="/img/loading.gif" lazyload alt="image-20220929091657443"></p>
<h2 id="mysql-事务隔离级别"><a href="#mysql-事务隔离级别" class="headerlink" title="mysql 事务隔离级别"></a>mysql 事务隔离级别</h2><ol>
<li><p>多个连接开启各自事务操作数据库中数据时，数据库系统要负责隔离操作,以保证各个连接在获取数据时的准确性。</p>
</li>
<li><p>如果不考虑隔离性，可能会引发如下问题:</p>
<ul>
<li>脏读</li>
<li>不可重复读</li>
<li>幻读</li>
</ul>
</li>
</ol>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929092106135.png" srcset="/img/loading.gif" lazyload alt="image-20220929092106135"></p>
<h3 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929093134508.png" srcset="/img/loading.gif" lazyload alt="image-20220929093134508"></p>
<h3 id="设置事务隔离级别"><a href="#设置事务隔离级别" class="headerlink" title="设置事务隔离级别"></a>设置事务隔离级别</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929095531997.png" srcset="/img/loading.gif" lazyload alt="image-20220929095531997"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929095623004.png" srcset="/img/loading.gif" lazyload alt="image-20220929095623004"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 1. 开了两个 mysql 的控制台 <br>-- 2. 查看当前 mysql 的隔离级别 <br>SELECT @@tx_isolation; <br>-- mysql&gt; SELECT @@tx_isolation; <br>-- +-----------------+ <br>-- | @@tx_isolation | <br>-- +-----------------+ <br>-- | REPEATABLE-READ | <br>-- +-----------------+ <br>-- 3.把其中一个控制台的隔离级别设置 <br>Read uncommitted SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED <br>-- 4. 创建表 <br>CREATE TABLE `account`( id INT, `name` VARCHAR(32), money INT); <br>-- 查看当前会话隔离级别 <br>SELECT @@tx_isolation -- 查看系统当前隔离级别<br>SELECT @@global.tx_isolation <br>-- 设置当前会话隔离级别 <br>SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED <br>-- 设置系统当前隔离级别 <br>SET GLOBAL TRANSACTION ISOLATION LEVEL [你设置的级别]<br></code></pre></td></tr></table></figure>

<h2 id="mysql-事务-ACID"><a href="#mysql-事务-ACID" class="headerlink" title="mysql 事务 ACID"></a>mysql 事务 ACID</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929100420281.png" srcset="/img/loading.gif" lazyload alt="image-20220929100420281"></p>
<h2 id="mysql-表类型和存储引擎"><a href="#mysql-表类型和存储引擎" class="headerlink" title="mysql 表类型和存储引擎"></a>mysql 表类型和存储引擎</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929100539243.png" srcset="/img/loading.gif" lazyload alt="image-20220929100539243"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929100608996.png" srcset="/img/loading.gif" lazyload alt="image-20220929100608996"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 表类型和存储引擎 <br>-- 查看所有的存储引擎<br>SHOW ENGINES <br>-- innodb 存储引擎，是前面使用过. <br>-- 1. 支持事务 2. 支持外键 3. 支持行级锁<br>-- myisam 存储引擎<br>CREATE TABLE t28 ( id INT, `name` VARCHAR(32)) ENGINE MYISAM<br>-- 1. 添加速度快 2. 不支持外键和事务 3. 支持表级锁<br><br>-- memory 存储引擎 <br>-- 1. 数据存储在内存中[关闭了 Mysql 服务，数据丢失, 但是表结构还在] <br>-- 2. 执行速度很快(没有 IO 读写) 3. 默认支持索引(hash 表) <br>CREATE TABLE t29 ( id INT, `name` VARCHAR(32)) ENGINE MEMORY <br>DESC t29<br>INSERT INTO t29 VALUES(1,&#x27;tom&#x27;), (2,&#x27;jack&#x27;), (3, &#x27;hsp&#x27;); <br>SELECT * FROM t29<br><br>-- 指令修改存储引擎 <br>ALTER TABLE `t29` ENGINE = INNODB<br></code></pre></td></tr></table></figure>

<h3 id="修改存储引擎"><a href="#修改存储引擎" class="headerlink" title="修改存储引擎"></a>修改存储引擎</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929105404547.png" srcset="/img/loading.gif" lazyload alt="image-20220929105404547"></p>
<h2 id="视图-view"><a href="#视图-view" class="headerlink" title="视图(view)"></a>视图(view)</h2><p>视图是一个虚拟表，其内容由查询定义。同真实的表一样，视图包含列，其数据来自对应的真实表(基表)</p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929110047027.png" srcset="/img/loading.gif" lazyload alt="image-20220929110047027"></p>
<h3 id="视图的基本使用"><a href="#视图的基本使用" class="headerlink" title="视图的基本使用"></a>视图的基本使用</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929110115892.png" srcset="/img/loading.gif" lazyload alt="image-20220929110115892"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 创建视图<br>create view bir_view as select t1,t2,t3 from bir;<br>-- 查看视图<br>desc bir_view;<br>-- 查看创建视图的指令<br>show create view bir_view;<br>-- 删除视图 <br>DROP VIEW bir_view;<br><br>-- 视图的细节 <br>-- 1. 创建视图后，到数据库去看，对应视图只有一个视图结构文件(形式: 视图名.frm) <br>-- 2. 视图的数据变化会影响到基表，基表的数据变化也会影响到视图[insert update delete ] <br>-- 修改视图 会影响到基表<br>-- 修改基本表， 会影响到视图<br><br></code></pre></td></tr></table></figure>

<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929123115201.png" srcset="/img/loading.gif" lazyload alt="image-20220929123115201"></p>
<h2 id="Mysql-管理"><a href="#Mysql-管理" class="headerlink" title="Mysql 管理"></a>Mysql 管理</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929123438395.png" srcset="/img/loading.gif" lazyload alt="image-20220929123438395"></p>
<h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929123618840.png" srcset="/img/loading.gif" lazyload alt="image-20220929123618840"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create user &#x27;testuser&#x27; @localhost identified by &#x27;123&#x27;;<br>-- 创建用户 zhangsan 密码 123 , 从本地登录 <br>CREATE USER &#x27;zhangsan&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;123&#x27;;<br>-- create user &#x27;xxx&#x27;@&#x27;192.168.1.%&#x27; 表示 xxx 用户在 192.168.1.*的 ip 可以登录 mysql<br>CREATE USER &#x27;smith&#x27;@&#x27;192.168.1.%&#x27;<br></code></pre></td></tr></table></figure>

<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929124107561.png" srcset="/img/loading.gif" lazyload alt="image-20220929124107561"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">drop user &#x27;testuser&#x27; @localhost;<br>-- 删除 zhangsan <br>DROP USER &#x27;zhangsan&#x27;@&#x27;localhost&#x27;<br><br>-- 在删除用户的时候，如果 host 不是 %, 需要明确指定 &#x27;用户&#x27;@&#x27;host 值&#x27;<br>DROP USER jack -- 默认就是 DROP USER &#x27;jack&#x27;@&#x27;%&#x27; <br>DROP USER &#x27;smith&#x27;@&#x27;192.168.1.%&#x27;<br></code></pre></td></tr></table></figure>

<h3 id="用户修改密码"><a href="#用户修改密码" class="headerlink" title="用户修改密码"></a>用户修改密码</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929124142389.png" srcset="/img/loading.gif" lazyload alt="image-20220929124142389"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SET PASSWORD FOR &#x27;zhangsan&#x27;@&#x27;localhost&#x27; = PASSWORD(&#x27;abc&#x27;);<br></code></pre></td></tr></table></figure>



<h3 id="给用户授权"><a href="#给用户授权" class="headerlink" title="给用户授权"></a>给用户授权</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929124747615.png" srcset="/img/loading.gif" lazyload alt="image-20220929124747615"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 给 zhangsan 分配查看 news 表和 添加 news 的权限<br>GRANT SELECT , INSERT ON testdb.news TO &#x27;zhangsan&#x27;@&#x27;localhost&#x27;;<br>-- 可以增加 update 权限 <br>GRANT UPDATE ON testdb.news TO &#x27;zhangsan&#x27;@&#x27;localhost&#x27;;<br></code></pre></td></tr></table></figure>

<h3 id="回收用户授权"><a href="#回收用户授权" class="headerlink" title="回收用户授权"></a>回收用户授权</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929124814206.png" srcset="/img/loading.gif" lazyload alt="image-20220929124814206"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 回收 shunping 用户在 testdb.news 表的所有权限 <br>REVOKE SELECT , UPDATE, INSERT ON testdb.news FROM &#x27;zhangsan&#x27;@&#x27;localhost&#x27; <br>REVOKE ALL ON testdb.news FROM &#x27;zhangsan&#x27;@&#x27;localhost<br></code></pre></td></tr></table></figure>



<h3 id="权限生效指令"><a href="#权限生效指令" class="headerlink" title="权限生效指令"></a>权限生效指令</h3><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220929124842527.png" srcset="/img/loading.gif" lazyload alt="image-20220929124842527"></p>
<h2 id="常用数据类型"><a href="#常用数据类型" class="headerlink" title="常用数据类型"></a>常用数据类型</h2><p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927141757933.png" srcset="/img/loading.gif" lazyload alt="image-20220927141757933"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927142129714.png" srcset="/img/loading.gif" lazyload alt="image-20220927142129714"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927142545347.png" srcset="/img/loading.gif" lazyload alt="image-20220927142545347"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927142607567.png" srcset="/img/loading.gif" lazyload alt="image-20220927142607567"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927142641844.png" srcset="/img/loading.gif" lazyload alt="image-20220927142641844"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927142708227.png" srcset="/img/loading.gif" lazyload alt="image-20220927142708227"></p>
<p><img src="https://trpora-1300527744.cos.ap-chongqing.myqcloud.com/img/image-20220927143053242.png" srcset="/img/loading.gif" lazyload alt="image-20220927143053242"></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/MySQL/">#MySQL</a>
      
        <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/">#数据库常用操作</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>数据库常用操作</div>
      <div>http://example.com/2022/09/29/数据库常用操作/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Deng ErPu</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年9月29日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/09/30/JavaScript%E5%9F%BA%E7%A1%80/" title="JavaScript基础">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">JavaScript基础</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/09/23/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/" title="网络爬虫">
                        <span class="hidden-mobile">网络爬虫</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
